# --- Zerodha ---
ZERODHA_API_KEY=9a6h8ko5o1myv0hp
ZERODHA_API_SECRET=9yuor4cxqou1a9t3hkh4wsg1oz64hbsg
ZERODHA_ACCESS_TOKEN=vbte5FtveDt2fPAociB5wKM63PSnGg5y

# --- Telegram ---
TELEGRAM_BOT_TOKEN=7962917167:AAGyIOqZJLq-TKz-ozZODcDT4syeVWFIybU
TELEGRAM_CHAT_ID=6931456598
TELEGRAM_PIN_STATUS=true

# ===== MODES / TOGGLES =====
ENABLE_LIVE_TRADING=true
ENABLE_TELEGRAM=true
ALLOW_OFFHOURS_TESTING=false
USE_IST_CLOCK=true
PREFERRED_EXIT_MODE=REGULAR

# Quality / Regime defaults
QUALITY_MODE_DEFAULT=auto           # default quality toggle (auto/on/off)
QUALITY_SCORE_BUMP=1.0              # bump min score when quality=ON
SESSION_AUTO_EXIT_TIME=15:30        # extended to market close
REGIME_MODE=auto                    # default regime mode (auto/trend/range/off)


# ===== STRATEGY CORE =====
MIN_SIGNAL_SCORE=2
CONFIDENCE_THRESHOLD=5.2
BASE_STOP_LOSS_POINTS=20.0
BASE_TARGET_POINTS=40.0
ATR_PERIOD=14
ATR_SL_MULTIPLIER=1.5
ATR_TP_MULTIPLIER=3.0
SL_CONFIDENCE_ADJ=0.12
TP_CONFIDENCE_ADJ=0.35

# --- Regime-aware TP/SL multipliers ---
REGIME_TREND_TP_MULT=3.4
REGIME_TREND_SL_MULT=1.6
REGIME_RANGE_TP_MULT=2.4
REGIME_RANGE_SL_MULT=1.3
REGIME_MRV_ENABLE=true
REGIME_MOM_ENABLE=true

# ===== MTF & REGIME FILTERS =====
ENABLE_MTF_FILTER=true
MTF_TIMEFRAME=5minute
MTF_EMA_FAST=21
MTF_EMA_SLOW=50

ENABLE_REGIME_FILTER=true
ADX_PERIOD=14
ADX_MIN_TREND=18
BB_WINDOW=20
BB_WIDTH_MIN=0.006                   # 0.6%
BB_WIDTH_MAX=0.02                    # 2.0%

# ----- Auto-quality -----
QUALITY_AUTO_ENABLE=true
QUALITY_AUTO_ADX_MIN=20
QUALITY_AUTO_BB_WIDTH_MAX=0.012
QUALITY_AUTO_SLOPE_MIN=0.00

# ===== DATA / WARMUP =====
WARMUP_BARS=25
DATA_LOOKBACK_MINUTES=45
HISTORICAL_TIMEFRAME=minute
SKIP_FIRST_MIN=5

# ===== INSTRUMENTS / LOTS =====
SPOT_SYMBOL=NSE:NIFTY 50
TRADE_SYMBOL=NIFTY
TRADE_EXCHANGE=NFO
INSTRUMENT_TOKEN=256265
NIFTY_LOT_SIZE=75
MIN_LOTS=1
MAX_LOTS=15
STRIKE_RANGE=3

# ===== RISK / CIRCUIT BREAKERS =====
RISK_PER_TRADE=0.025
MAX_DRAWDOWN=0.07
CONSECUTIVE_LOSS_LIMIT=3
MAX_DAILY_DRAWDOWN_PCT=0.05
CIRCUIT_RELEASE_PCT=0.015
HALT_ON_DRAWDOWN=true
MAX_CONCURRENT_POSITIONS=1
MAX_TRADES_PER_DAY=30
LOSS_COOLDOWN_MIN=2
LOSS_STREAK_HALVE_SIZE=3
LOSS_STREAK_PAUSE_MIN=20
DAY_STOP_AFTER_POS_R=4.0
DAY_HALF_SIZE_AFTER_POS_R=2.0
DAY_STOP_AFTER_NEG_R=-3.0
ATR_TARGET=10.0
ATR_MIN=3.0
VOL_RISK_CLAMP_MIN=0.5
VOL_RISK_CLAMP_MAX=1.5

# ===== OPTIONS FILTERS =====
OPTION_TYPE=BOTH
OPTION_SL_PERCENT=0.05
OPTION_TP_PERCENT=0.20
OPTION_BREAKOUT_PCT=0.003
OPTION_SPOT_TREND_PCT=0.0025
OPTION_REQUIRE_SPOT_CONFIRM=false
MIN_PREMIUM=12.0
SPREAD_MEAN_PCT_MAX=0.03
IV_SOURCE=LTP_IMPLIED
RISK_FREE_RATE=0.06
IV_MAX=0.70
EXPIRY_PREFERENCE=NEAR
REQUIRE_OI=false
MIN_OI=30000

# ===== EXECUTION / WORKERS =====
DEFAULT_PRODUCT=MIS
DEFAULT_ORDER_TYPE=MARKET
DEFAULT_ORDER_TYPE_EXIT=LIMIT
DEFAULT_VALIDITY=DAY
TICK_SIZE=0.05
TRAILING_ENABLE=true
TRAIL_COOLDOWN_SEC=12
TRAIL_MIN_POINTS=1.0
WORKER_INTERVAL_SEC=10
NFO_FREEZE_QTY=1800
MAX_ENTRY_SLIP_BPS=25
ORDER_RETRY_LIMIT=2
ORDER_RETRY_TICK_OFFSET=2

# ----- Spread guard -----
SPREAD_GUARD_MODE=LTP_MID
SPREAD_GUARD_BA_MAX=0.015
SPREAD_GUARD_LTPMID_MAX=0.015
SPREAD_GUARD_PCT=0.03
DYNAMIC_SPREAD_GUARD=true
SPREAD_VOL_LOOKBACK=20

# ===== EXITS / PARTIALS =====
PARTIAL_TP_ENABLE=true
PARTIAL_TP_RATIO=0.50
PARTIAL_TP_USE_MIDPOINT=true
PARTIAL_TP2_R_MULT=2.0
BREAKEVEN_AFTER_TP1_ENABLE=true
BREAKEVEN_OFFSET_TICKS=1
HARD_STOP_ENABLE=true
HARD_STOP_GRACE_SEC=3.0
HARD_STOP_SLIPPAGE_BPS=5
CHANDELIER_N=22
CHANDELIER_K=2.5
VWAP_TRAIL_ENABLE=true
MAX_HOLD_MIN=25
BOX_HOLD_PCT=0.01

# ===== SCHEDULING / HOURS =====
PEAK_POLL_SEC=5                     # reduced polling to 5s baseline
OFFPEAK_POLL_SEC=5                   # same (can raise if needed)
TIME_FILTER_START=09:20
TIME_FILTER_END=15:20
ENABLE_TIME_BUCKETS=false
TIME_BUCKETS=09:30-11:15,13:45-15:00
ENABLE_EVENT_WINDOWS=false
EVENT_WINDOWS=11:55-12:10,14:25-14:40

# ===== FEES / SLIPPAGE =====
SLIPPAGE_BPS=4.0
FEES_PER_LOT=25.0
FEES_PCT_PER_SIDE=0.03

# ===== LOGGING / DIAGNOSTICS =====
LOG_FILE=logs/trades.csv
DIAGNOSTIC_VERBOSE=false
LOG_LEVEL=INFO
BALANCE_LOG_INTERVAL_MIN=30
DETAIL_LOGS_ENABLE=true
HEARTBEAT_MIN=3

# ===== ORDER SAFETY / STATE =====
IDEMP_TTL_SEC=60
PERSIST_REATTACH_ON_START=true